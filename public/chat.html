<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Online</title>
    <link rel="stylesheet" href="chat-style.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body data-theme="light">
    <div id="app-container">

        <div id="sidebar">
            <div id="sidebar-header">
                <h3 id="my-username">Äang táº£i...</h3>
                <div id="header-buttons">
                    <button id="theme-toggle" title="Chuyá»ƒn cháº¿ Ä‘á»™">ğŸŒ™</button>
                    <button id="encryption-toggle" title="MÃ£ hÃ³a Ä‘ang táº¯t">ğŸ”“</button>
                    <button id="logout-button">ÄÄƒng xuáº¥t</button>
                </div>
            </div>

            <div id="search-bar">
                <div class="search-wrapper">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" id="search-input" placeholder="TÃ¬m kiáº¿m ngÆ°á»i dÃ¹ng...">
                </div>
            </div>

            <div id="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="users">NgÆ°á»i dÃ¹ng</button>
                <button class="sidebar-tab" data-tab="groups">NhÃ³m</button>
            </div>

            <div id="sidebar-content">

                <div id="users-list-container" class="tab-content active">
                    <div id="user-list">
                        </div>
                </div>
                
                <div id="groups-list-container" class="tab-content">
                    <div id="group-list"></div>
                        <button id="create-group-btn" class="floating-plus-btn">
                        <span>ï¼‹</span>
                    </button>
                </div>

            </div> </div> <div id="chat-area">
            <div id="chat-header">
                <h2 id="chat-header-title">HÃ£y chá»n má»™t ngÆ°á»i dÃ¹ng Ä‘á»ƒ báº¯t Ä‘áº§u chat</h2>
                <div id="chat-header-actions">
                    <button id="call-button" class="header-action-btn" title="Gá»i thoáº¡i">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button id="video-call-button" class="header-action-btn" title="Gá»i video">
                        <i class="fas fa-video"></i>
                    </button>
                </div>
            </div>
            <div id="messages"></div>
            <div id="typing-indicator" class="hidden">NgÆ°á»i kia Ä‘ang gÃµ...</div>
            <form id="chat-form">
                <button type="button" id="attach-button" title="ÄÃ­nh kÃ¨m file">+</button>
                <button type="button" class="emoji-button" title="ChÃ¨n emoji">ğŸ˜€</button>
                <input id="message-input" autocomplete="off" placeholder="Chá»n má»™t ngÆ°á»i Ä‘á»ƒ nháº¯n tin..." disabled/>
                <button type="submit" disabled>Gá»­i</button>
            </form>
        </div>
    </div>

    <!-- Modal táº¡o nhÃ³m -->
    <div id="create-group-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h2>Táº¡o NhÃ³m Má»›i</h2>
            <input type="text" id="group-name-input" placeholder="Nháº­p tÃªn nhÃ³m...">
            <h3>Chá»n thÃ nh viÃªn:</h3>
            <div id="modal-user-list"></div>
            <div class="modal-actions">
                <button id="cancel-create-group">Há»§y</button>
                <button id="confirm-create-group">Táº¡o</button>
            </div>
        </div>
    </div>

    <!-- Modal WebRTC -->
    <div id="call-modal" class="modal-backdrop hidden">
        <div class="modal-content call-modal">
            <h2 id="call-status">Äang káº¿t ná»‘i...</h2>
            
            <div class="video-container">
                <video id="remote-video" autoplay playsinline></video>
                <video id="local-video" autoplay playsinline muted></video>
            </div>
            
            <div class="call-controls">
                <button id="toggle-mic-button" class="control-btn hidden" title="Táº¯t mic">
                    <i class="fas fa-microphone"></i>
                </button>
                <button id="toggle-camera-button" class="control-btn hidden" title="Táº¯t camera">
                    <i class="fas fa-video"></i>
                </button>
                <button id="hangup-button" class="control-btn hangup" title="Káº¿t thÃºc">
                    <i class="fas fa-phone-slash"></i>
                </button>
                <button id="answer-call-button" class="control-btn answer hidden" title="Tráº£ lá»i">
                    <i class="fas fa-phone"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Ä‘Ã­nh kÃ¨m file -->
    <div id="file-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h2>ÄÃ­nh kÃ¨m File</h2>
            <input type="file" id="file-input" multiple>
            <div class="modal-actions">
                <button id="cancel-file">Há»§y</button>
                <button id="send-file">Gá»­i</button>
            </div>
        </div>
    </div>

    <!-- Emoji picker -->
    <div id="emoji-picker" class="emoji-picker hidden">
        <div class="emoji-grid">
            <span>ğŸ˜€</span><span>ğŸ˜‚</span><span>ğŸ˜</span><span>ğŸ˜Š</span><span>ğŸ¤”</span>
            <span>ğŸ‘</span><span>â¤ï¸</span><span>ğŸ‰</span><span>ğŸ”¥</span><span>â­</span>
            <span>ğŸ˜</span><span>ğŸ˜¢</span><span>ğŸ˜¡</span><span>ğŸ¤¯</span><span>ğŸ¥³</span>
        </div>
    </div>

    <!-- Encryption status -->
    <div id="encryption-status" class="encryption-status hidden">
        <span>ğŸ”’ MÃ£ hÃ³a Ä‘ang báº­t</span>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="main.js"></script> 
    <script src="group-chat.js"></script> 
    <script src="webrtc.js"></script>
    <script src="file-handler.js"></script>
    <script src="encryption.js"></script>
</body> 
</html>